<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <title>Artikel</title>
  <style>
    body { font-family: sans-serif; max-width: 800px; margin: 2rem auto; padding: 0 1rem; }
    h1 { color: #333; }
    p { line-height: 1.6; }
    a { color: #0070f3; text-decoration: none; }
  </style>
</head>
<body>
  <h1 id="artikel-title">Lade Artikel…</h1>
  <div id="artikel-content">Bitte warten…</div>
  <p><a href="/">Zurück zur Startseite</a></p>

  <script>
    // URL-Parameter auslesen
    const params = new URLSearchParams(window.location.search);
    const slug = params.get("slug");

    if (!slug) {
      document.getElementById("artikel-title").textContent = "Kein Artikel ausgewählt";
      document.getElementById("artikel-content").textContent = "Bitte über die URL einen Artikel-Slug angeben, z.B. ?slug=fancy-artikel";
    } else {
      // JSON aus Supabase laden
      fetch(`https://ngtujvgsbymtxphwncuj.supabase.co/storage/v1/object/public/articles/${slug}.json`)
        .then(res => {
          if (!res.ok) throw new Error("Artikel nicht gefunden");
          return res.json();
        })
        .then(data => {
          document.getElementById("artikel-title").textContent = data.title;
          document.getElementById("artikel-content").innerHTML = data.content;
        })
        .catch(err => {
          console.error(err);
          document.getElementById("artikel-title").textContent = "Fehler beim Laden des Artikels";
          document.getElementById("artikel-content").textContent = err.message;
        });
    }
  </script>
</body>
</html>
