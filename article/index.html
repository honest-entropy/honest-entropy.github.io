<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <title>Artikel</title>
</head>
<body>
  <h1 id="title">Lade...</h1>
  <div id="content">Bitte warten...</div>
  <p><a href="/">Zur√ºck zur Startseite</a></p>

<script>
  const params = new URLSearchParams(window.location.search);
  const slug = params.get('slug');

  if (!slug) {
    document.getElementById('title').innerText = "Kein Artikel ausgew√§hlt";
    document.getElementById('content').innerText = "Bitte URL mit ?slug=artikelname verwenden";
  } else {
    const bucketBaseUrl = "https://xyz.supabase.co/storage/v1/object/public/articles"; // <--- anpassen

    console.log("üìå Lade Artikel-Slug:", slug);
    const url = `${bucketBaseUrl}/${slug}.json`;
    console.log("üìå Fetch URL:", url);

    fetch(url)
      .then(res => {
        console.log("üìå HTTP Status:", res.status, res.statusText);
        if (!res.ok) throw new Error("Artikel nicht gefunden oder Zugriff verweigert");
        return res.json();
      })
      .then(data => {
        console.log("üìå Geladene JSON:", data);
        document.getElementById('title').innerText = data.title;
        document.getElementById('content').innerHTML = data.content;
      })
      .catch(err => {
        console.error("‚ùå Fetch Fehler:", err);
        document.getElementById('title').innerText = "Artikel nicht gefunden";
        document.getElementById('content').innerText = err.message;
      });
  }
</script>
</body>
</html>
