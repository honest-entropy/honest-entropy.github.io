<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <title id="artikel-title">Lade...</title>
</head>
<body>
  <h1 id="artikel-heading">Lade...</h1>
  <p id="artikel-content">Bitte warten...</p>

  <script>
    const params = new URLSearchParams(window.location.search);
    const slug = params.get('slug');
    console.log("Gefundener Slug:", slug);

    if (!slug) {
      document.getElementById("artikel-heading").innerText = "Kein Artikel angegeben";
    } else {
      const url = `https://ngtujvgsbymtxphwncuj.supabase.co/storage/v1/object/public/articles/${slug}.json`;
      console.log("Fetch URL:", url);

      fetch(url)
        .then(res => {
          console.log("Response Status:", res.status);
          return res.json();
        })
        .then(data => {
          console.log("Geladene Daten:", data);
          document.getElementById("artikel-title").innerText = data.title;
          document.getElementById("artikel-heading").innerText = data.title;
          document.getElementById("artikel-content").innerText = data.content;
        })
        .catch(err => {
          console.error("X JSON Parsing oder Fetch Fehler:", err);
          document.getElementById("artikel-heading").innerText = "Fehler beim Laden des Artikels";
          document.getElementById("artikel-content").innerText = err;
        });
    }
  </script>
</body>
</html>
